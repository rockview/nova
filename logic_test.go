// MIT License
// 
// Copyright 2017 Jeremy Hall
// 
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
// 
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.

package nova

import (
    "time"

    "testing"
)

func TestLogic(t *testing.T) {
/*
Nova 800 Logic Test, tape 095-000045-02, document: 097-000023-02.

See: ftp://bitsavers.informatik.uni-stuttgart.de/pdf/dg/software/diag/097-000023-02_Nova800_Logic_Test_1971.pdf

Start addresses

00376: complete logic test
00374: MUL-DIV logic test

Each test will repeat indefinitely when started at either of these addresses.
Place a HALT instruction at address 03443 to halt either test after one pass.

The comments below match the labels in the program listing of the document above.
*/
    program := [...]uint16 {
        00000: 0000000,
        00001: 0000000,
        00002: 0063077,
        00003: 0000002,

        00045: 0000050,

        00050: 0000000, // EGGS
        00051: 0000000,
        00052: 0000000,
        00053: 0000000,

        00054: 0000054,
        00055: 0000000, // K0
        00056: 0000056,
        00057: 0177777, // KONES
        00060: 0000060,
        00061: 0000001, // KB15
        00062: 0000062,
        00063: 0100000, // KB0
        00064: 0040000, // KB1
        00065: 0020000, // KB2
        00066: 0010000, // KB3
        00067: 0004000, // KB4
        00070: 0002000, // KB5
        00071: 0001000, // KB6
        00072: 0000400, // KB7
        00073: 0000200, // KB8
        00074: 0000100, // KB9
        00075: 0000040, // KB10
        00076: 0000020, // KB11
        00077: 0000010, // KB12
        00100: 0000004, // KB13
        00101: 0000002, // KB14

        00102: 0000003, // K3
        00103: 0000007, // K7
        00104: 0000017, // K17
        00105: 0000037, // K37
        00106: 0000077, // K77
        00107: 0000177, // K177
        00110: 0000377, // K377
        00111: 0000777, // K777
        00112: 0001777, // K1777
        00113: 0003777, // K3777
        00114: 0007777, // K7777
        00115: 0017777, // K1.4K
        00116: 0037777, // K3.4K
        00117: 0077777, // K7.4k
        00120: 0177777, // K17.4K
        00121: 0077777, // KB0C
        00122: 0137777, // KB1C
        00123: 0157777, // KB2C
        00124: 0167777, // KB3C
        00125: 0173777, // KB4C
        00126: 0175777, // KB5C
        00127: 0176777, // KB6C
        00130: 0177377, // KB7C
        00131: 0177577, // KB8C
        00132: 0177677, // KB9C
        00133: 0177737, // KB10C
        00134: 0177757, // KB11C
        00135: 0177767, // KB12C
        00136: 0177773, // KB13C
        00137: 0177775, // KB14C
        00140: 0177776, // KB15C

        00141: 0152525, // KEB
        00142: 0025252, // KOB

        00143: 0000000, // INDIR
        00144: 0000061,
        00145: 0000000, // INDR1
        00146: 0100143,

        00147: 0177775, // M3
        00150: 0000000, // PG0

        00151: 0140000, // BOT1
        00152: 0160000, // BOT2
        00153: 0170000, // BOT3
        00154: 0174000, // BOT4
        00155: 0176000, // BOT5
        00156: 0177000, // BOT6
        00157: 0177400, // BOT7
        00160: 0177600, // BOT8
        00161: 0177700, // BOT9
        00162: 0177740, // BOT10
        00163: 0177760, // BOT11
        00164: 0177770, // BOT12
        00165: 0177774, // BOT13
        00166: 0177776, // BOT14
        00167: 0177777, // BOT15

        00170: 0000000, // LADDR

        00374: 0002375, // Start of MUL-DIV logic test
        00375: 0002442,

        00376: 0000402, // LOOP: Start of complete logic test
        00377: 0063077,

        00400: 0101001, // A00
        00401: 0063077,

        00402: 0101000, // A01
        00403: 0101001,
        00404: 0063077,

        00405: 0101043, // A02
        00406: 0063077,

        00407: 0101022, // A03
        00410: 0063077,

        00411: 0101042, // A04
        00412: 0101001,
        00413: 0063077,

        00414: 0101023, // A05
        00415: 0101001,
        00416: 0063077,

        00417: 0101040, // A06
        00420: 0101003,
        00421: 0063077,

        00422: 0101020, // A07
        00423: 0101002,
        00424: 0063077,

        00425: 0101040, // A08
        00426: 0101062,
        00427: 0063077,

        00430: 0101020, // A09
        00431: 0101063,
        00432: 0063077,

        00433: 0101040, // A10
        00434: 0101033,
        00435: 0101003,
        00436: 0063077,

        00437: 0101020, // A11
        00440: 0101052,
        00441: 0101002,
        00442: 0063077,

        00443: 0101040, // A12
        00444: 0101073,
        00445: 0101062,
        00446: 0063077,

        00447: 0101020, // A13
        00450: 0101072,
        00451: 0101063,
        00452: 0063077,

        00453: 0020055, // A14
        00454: 0101004,
        00455: 0063077,

        00456: 0020055, // A15
        00457: 0101005,
        00460: 0101004,
        00461: 0063077,

        00462: 0020063, // A16
        00463: 0101004,
        00464: 0101005,
        00465: 0063077,

        00466: 0020064, // A17
        00467: 0101004,
        00470: 0101005,
        00471: 0063077,

        00472: 0020065, // A18
        00473: 0101004,
        00474: 0101005,
        00475: 0063077,

        00476: 0020066, // A19
        00477: 0101004,
        00500: 0101005,
        00501: 0063077,

        00502: 0020067, // A20
        00503: 0101004,
        00504: 0101005,
        00505: 0063077,

        00506: 0020070, // A21
        00507: 0101004,
        00510: 0101005,
        00511: 0063077,

        00512: 0020071, // A22
        00513: 0101004,
        00514: 0101005,
        00515: 0063077,

        00516: 0020072, // A23
        00517: 0101004,
        00520: 0101005,
        00521: 0063077,

        00522: 0020073, // A24
        00523: 0101004,
        00524: 0101005,
        00525: 0063077,

        00526: 0020074, // A25
        00527: 0101004,
        00530: 0101005,
        00531: 0063077,

        00532: 0020075, // A26
        00533: 0101004,
        00534: 0101005,
        00535: 0063077,

        00536: 0020076, // A27
        00537: 0101004,
        00540: 0101005,
        00541: 0063077,

        00542: 0020077, // A28
        00543: 0101004,
        00544: 0101005,
        00545: 0063077,

        00546: 0020100, // A29
        00547: 0101004,
        00550: 0101005,
        00551: 0063077,

        00552: 0020101, // A30
        00553: 0101004,
        00554: 0101005,
        00555: 0063077,

        00556: 0020061, // A31
        00557: 0101004,
        00560: 0101005,
        00561: 0063077,

        00562: 0020055, // A32
        00563: 0024064,
        00564: 0030065,
        00565: 0034066,
        00566: 0101004,
        00567: 0063077,

        00570: 0024055, // A33
        00571: 0030064,
        00572: 0034065,
        00573: 0020066,
        00574: 0125004,
        00575: 0063077,

        00576: 0030055, // A34
        00577: 0034064,
        00600: 0020065,
        00601: 0024066,
        00602: 0151004,
        00603: 0063077,

        00604: 0034055, // A35
        00605: 0020064,
        00606: 0024065,
        00607: 0030066,
        00610: 0175004,
        00611: 0063077,

        00612: 0101020, // A36
        00613: 0020063,
        00614: 0101103,
        00615: 0063077,

        00616: 0101020, // A37
        00617: 0020061,
        00620: 0101203,
        00621: 0063077,

        00622: 0101343, // A38
        00623: 0063077,

        00624: 0101322, // A39
        00625: 0063077,

        00626: 0020061, // A40
        00627: 0101027,
        00630: 0101006,
        00631: 0063077,

        00632: 0020055, // A41
        00633: 0101047,
        00634: 0101006,
        00635: 0063077,

        00636: 0020055, // A42
        00637: 0101026,
        00640: 0063077,

        00641: 0020061, // A43
        00642: 0101047,
        00643: 0063077,

        00644: 0020057, // B01
        00645: 0104004,
        00646: 0063077,

        00647: 0020055, // B02
        00650: 0104004,
        00651: 0130004,
        00652: 0063077,

        00653: 0020063, // B03
        00654: 0024121,
        00655: 0107023,
        00656: 0130004,
        00657: 0063077,

        00660: 0020064, // B04
        00661: 0024122,
        00662: 0107023,
        00663: 0130004,
        00664: 0063077,

        00665: 0020065, // B05
        00666: 0024123,
        00667: 0107023,
        00670: 0130004,
        00671: 0063077,

        00672: 0020066, // B06
        00673: 0024124,
        00674: 0107023,
        00675: 0130004,
        00676: 0063077,

        00677: 0020067, // B07
        00700: 0024125,
        00701: 0107042,
        00702: 0130004,
        00703: 0063077,

        00704: 0020070, // B08
        00705: 0024126,
        00706: 0107023,
        00707: 0130004,
        00710: 0063077,

        00711: 0020071, // B09
        00712: 0024127,
        00713: 0107023,
        00714: 0130004,
        00715: 0063077,

        00716: 0020072, // B10
        00717: 0024130,
        00720: 0107023,
        00721: 0130004,
        00722: 0063077,

        00723: 0020073, // B11
        00724: 0024131,
        00725: 0107042,
        00726: 0130004,
        00727: 0063077,

        00730: 0020074, // B12
        00731: 0024132,
        00732: 0107042,
        00733: 0130004,
        00734: 0063077,

        00735: 0020075, // B13
        00736: 0024133,
        00737: 0107042,
        00740: 0130004,
        00741: 0063077,

        00742: 0020076, // B14
        00743: 0024134,
        00744: 0107023,
        00745: 0130004,
        00746: 0063077,

        00747: 0020077, // B15
        00750: 0024135,
        00751: 0107023,
        00752: 0130004,
        00753: 0063077,

        00754: 0020100, // B16
        00755: 0024136,
        00756: 0107023,
        00757: 0130004,
        00760: 0063077,

        00761: 0020101, // B17
        00762: 0024137,
        00763: 0107023,
        00764: 0130004,
        00765: 0063077,

        00766: 0020061, // B18
        00767: 0024140,
        00770: 0107042,
        00771: 0130004,
        00772: 0063077,

        00773: 0020061, // B19
        00774: 0024101,
        00775: 0030100,
        00776: 0034077,
        00777: 0102023,
        01000: 0100004,
        01001: 0063077,

        01002: 0020061, // B20
        01003: 0024101,
        01004: 0030100,
        01005: 0034077,
        01006: 0126023,
        01007: 0124004,
        01010: 0063077,

        01011: 0020061, // B21
        01012: 0024101,
        01013: 0030100,
        01014: 0034077,
        01015: 0152023,
        01016: 0150004,
        01017: 0063077,

        01020: 0020061, // B22
        01021: 0024101,
        01022: 0030100,
        01023: 0034077,
        01024: 0176023,
        01025: 0174004,
        01026: 0063077,

        01027: 0020055, // B23
        01030: 0030121,
        01031: 0105240,
        01032: 0133003,
        01033: 0154004,
        01034: 0063077,

        01035: 0020063, // B24
        01036: 0030122,
        01037: 0105220,
        01040: 0133003,
        01041: 0154004,
        01042: 0063077,

        01043: 0020064, // B25
        01044: 0030123,
        01045: 0105220,
        01046: 0133003,
        01047: 0154004,
        01050: 0063077,

        01051: 0020065, // B26
        01052: 0030124,
        01053: 0105220,
        01054: 0133003,
        01055: 0154004,
        01056: 0063077,

        01057: 0020066, // B27
        01060: 0030125,
        01061: 0105220,
        01062: 0133003,
        01063: 0154004,
        01064: 0063077,

        01065: 0020067, // B28
        01066: 0030126,
        01067: 0105220,
        01070: 0133003,
        01071: 0154004,
        01072: 0063077,

        01073: 0020070, // B29
        01074: 0030127,
        01075: 0105220,
        01076: 0133003,
        01077: 0154004,
        01100: 0063077,

        01101: 0020071, // B30
        01102: 0030130,
        01103: 0105220,
        01104: 0133003,
        01105: 0154004,
        01106: 0063077,

        01107: 0020072, // B31
        01110: 0030131,
        01111: 0105220,
        01112: 0133003,
        01113: 0154004,
        01114: 0063077,

        01115: 0020073, // B32
        01116: 0030132,
        01117: 0105220,
        01120: 0133003,
        01121: 0154004,
        01122: 0063077,

        01123: 0020074, // B33
        01124: 0030133,
        01125: 0105220,
        01126: 0133003,
        01127: 0154004,
        01130: 0063077,

        01131: 0020075, // B34
        01132: 0030134,
        01133: 0105220,
        01134: 0133003,
        01135: 0154004,
        01136: 0063077,

        01137: 0020076, // B35
        01140: 0030135,
        01141: 0105220,
        01142: 0133003,
        01143: 0154004,
        01144: 0063077,

        01145: 0020077, // B36
        01146: 0030136,
        01147: 0105220,
        01150: 0133003,
        01151: 0154004,
        01152: 0063077,

        01153: 0020100, // B37
        01154: 0030137,
        01155: 0105220,
        01156: 0133003,
        01157: 0154004,
        01160: 0063077,

        01161: 0020101, // B38
        01162: 0030140,
        01163: 0105220,
        01164: 0133003,
        01165: 0154004,
        01166: 0063077,

        01167: 0020055, // B39
        01170: 0030140,
        01171: 0105140,
        01172: 0133003,
        01173: 0154004,
        01174: 0063077,

        01175: 0020061, // B40
        01176: 0030137,
        01177: 0105120,
        01200: 0133003,
        01201: 0154004,
        01202: 0063077,

        01203: 0020101, // B41
        01204: 0030136,
        01205: 0105120,
        01206: 0133003,
        01207: 0154004,
        01210: 0063077,

        01211: 0020100, // B42
        01212: 0030135,
        01213: 0105120,
        01214: 0133003,
        01215: 0154004,
        01216: 0063077,

        01217: 0020077, // B43
        01220: 0030134,
        01221: 0105120,
        01222: 0133003,
        01223: 0154004,
        01224: 0063077,

        01225: 0020076, // B44
        01226: 0030133,
        01227: 0105120,
        01230: 0133003,
        01231: 0154004,
        01232: 0063077,

        01233: 0020075, // B45
        01234: 0030132,
        01235: 0105120,
        01236: 0133003,
        01237: 0154004,
        01240: 0063077,

        01241: 0020074, // B46
        01242: 0030131,
        01243: 0105120,
        01244: 0133003,
        01245: 0154004,
        01246: 0063077,

        01247: 0020073, // B47
        01250: 0030130,
        01251: 0105120,
        01252: 0133003,
        01253: 0154004,
        01254: 0063077,

        01255: 0020072, // B48
        01256: 0030127,
        01257: 0105120,
        01260: 0133003,
        01261: 0154004,
        01262: 0063077,

        01263: 0020071, // B49
        01264: 0030126,
        01265: 0105120,
        01266: 0133003,
        01267: 0154004,
        01270: 0063077,

        01271: 0020070, // B50
        01272: 0030125,
        01273: 0105120,
        01274: 0133003,
        01275: 0154004,
        01276: 0063077,

        01277: 0020067, // B51
        01300: 0030124,
        01301: 0105120,
        01302: 0133003,
        01303: 0154004,
        01304: 0063077,

        01305: 0020066, // B52
        01306: 0030123,
        01307: 0105120,
        01310: 0133003,
        01311: 0154004,
        01312: 0063077,

        01313: 0020065, // B53
        01314: 0030122,
        01315: 0105120,
        01316: 0133003,
        01317: 0154004,
        01320: 0063077,

        01321: 0020064, // B54
        01322: 0030121,
        01323: 0105120,
        01324: 0133003,
        01325: 0154004,
        01326: 0063077,

        01327: 0020061, // B55
        01330: 0030130,
        01331: 0105300,
        01332: 0133000,
        01333: 0154004,
        01334: 0063077,

        01335: 0020101, // B56
        01336: 0030127,
        01337: 0105300,
        01340: 0133000,
        01341: 0154004,
        01342: 0063077,

        01343: 0020100, // B57
        01344: 0030126,
        01345: 0105300,
        01346: 0133000,
        01347: 0154004,
        01350: 0063077,

        01351: 0020077, // B58
        01352: 0030125,
        01353: 0105300,
        01354: 0133000,
        01355: 0154004,
        01356: 0063077,

        01357: 0020076, // B59
        01360: 0030124,
        01361: 0105300,
        01362: 0133000,
        01363: 0154004,
        01364: 0063077,

        01365: 0020075, // B60
        01366: 0030123,
        01367: 0105300,
        01370: 0133000,
        01371: 0154004,
        01372: 0063077,

        01373: 0020074, // B61
        01374: 0030122,
        01375: 0105300,
        01376: 0133000,
        01377: 0154004,
        01400: 0063077,

        01401: 0020073, // B62
        01402: 0030121,
        01403: 0105300,
        01404: 0133000,
        01405: 0154004,
        01406: 0063077,

        01407: 0020072, // B63
        01410: 0030140,
        01411: 0105300,
        01412: 0133000,
        01413: 0154004,
        01414: 0063077,

        01415: 0020071, // B64
        01416: 0030137,
        01417: 0105300,
        01420: 0133000,
        01421: 0154004,
        01422: 0063077,

        01423: 0020070, // B65
        01424: 0030136,
        01425: 0105300,
        01426: 0133000,
        01427: 0154004,
        01430: 0063077,

        01431: 0020067, // B66
        01432: 0030135,
        01433: 0105300,
        01434: 0133000,
        01435: 0154004,
        01436: 0063077,

        01437: 0020066, // B67
        01440: 0030134,
        01441: 0105300,
        01442: 0133000,
        01443: 0154004,
        01444: 0063077,

        01445: 0020065, // B68
        01446: 0030133,
        01447: 0105300,
        01450: 0133000,
        01451: 0154004,
        01452: 0063077,

        01453: 0020064, // B69
        01454: 0030132,
        01455: 0105300,
        01456: 0133000,
        01457: 0154004,
        01460: 0063077,

        01461: 0020063, // B70
        01462: 0030131,
        01463: 0105300,
        01464: 0133000,
        01465: 0154004,
        01466: 0063077,

        01467: 0020063, // C01
        01470: 0024063,
        01471: 0123022,
        01472: 0101004,
        01473: 0063077,

        01474: 0020151, // C02
        01475: 0024064,
        01476: 0123022,
        01477: 0101004,
        01500: 0063077,

        01501: 0020152, // C03
        01502: 0024065,
        01503: 0123022,
        01504: 0101004,
        01505: 0063077,

        01506: 0020153, // C04
        01507: 0024066,
        01510: 0123022,
        01511: 0101004,
        01512: 0063077,

        01513: 0020154, // C05
        01514: 0024067,
        01515: 0123022,
        01516: 0101004,
        01517: 0063077,

        01520: 0020155, // C06
        01521: 0024070,
        01522: 0123022,
        01523: 0101004,
        01524: 0063077,

        01525: 0020156, // C07
        01526: 0024071,
        01527: 0123022,
        01530: 0101004,
        01531: 0063077,

        01532: 0020157, // C08
        01533: 0024072,
        01534: 0123022,
        01535: 0101004,
        01536: 0063077,

        01537: 0020160, // C09
        01540: 0024073,
        01541: 0123022,
        01542: 0101004,
        01543: 0063077,

        01544: 0020161, // C10
        01545: 0024074,
        01546: 0123022,
        01547: 0101004,
        01550: 0063077,

        01551: 0020162, // C11
        01552: 0024075,
        01553: 0123022,
        01554: 0101004,
        01555: 0063077,

        01556: 0020163, // C12
        01557: 0024076,
        01560: 0123022,
        01561: 0101004,
        01562: 0063077,

        01563: 0020164, // C13
        01564: 0024077,
        01565: 0123022,
        01566: 0101004,
        01567: 0063077,

        01570: 0020165, // C14
        01571: 0024100,
        01572: 0123022,
        01573: 0101004,
        01574: 0063077,

        01575: 0020166, // C15
        01576: 0024101,
        01577: 0123022,
        01600: 0101004,
        01601: 0063077,

        01602: 0020167, // C16
        01603: 0024061,
        01604: 0123022,
        01605: 0101004,
        01606: 0063077,

        01607: 0020063, // C17
        01610: 0024063,
        01611: 0107022,
        01612: 0125004,
        01613: 0063077,

        01614: 0020151, // C18
        01615: 0024064,
        01616: 0107022,
        01617: 0125004,
        01620: 0063077,

        01621: 0020152, // C19
        01622: 0024065,
        01623: 0107022,
        01624: 0125004,
        01625: 0063077,

        01626: 0020153, // C20
        01627: 0024066,
        01630: 0107022,
        01631: 0125004,
        01632: 0063077,

        01633: 0020154, // C21
        01634: 0024067,
        01635: 0107022,
        01636: 0125004,
        01637: 0063077,

        01640: 0020155, // C22
        01641: 0024070,
        01642: 0107022,
        01643: 0125004,
        01644: 0063077,

        01645: 0020156, // C23
        01646: 0024071,
        01647: 0107022,
        01650: 0125004,
        01651: 0063077,

        01652: 0020157, // C24
        01653: 0024072,
        01654: 0107022,
        01655: 0125004,
        01656: 0063077,

        01657: 0020160, // C25
        01660: 0024073,
        01661: 0107022,
        01662: 0125004,
        01663: 0063077,

        01664: 0020161, // C26
        01665: 0024074,
        01666: 0107022,
        01667: 0125004,
        01670: 0063077,

        01671: 0020162, // C27
        01672: 0024075,
        01673: 0107022,
        01674: 0125004,
        01675: 0063077,

        01676: 0020163, // C28
        01677: 0024076,
        01700: 0107022,
        01701: 0125004,
        01702: 0063077,

        01703: 0020164, // C29
        01704: 0024077,
        01705: 0107022,
        01706: 0125004,
        01707: 0063077,

        01710: 0020165, // C30
        01711: 0024100,
        01712: 0107022,
        01713: 0125004,
        01714: 0063077,

        01715: 0020166, // C31
        01716: 0024101,
        01717: 0107022,
        01720: 0125004,
        01721: 0063077,

        01722: 0020167, // C32
        01723: 0024061,
        01724: 0107022,
        01725: 0125004,
        01726: 0063077,

        01727: 0020055, // C33
        01730: 0024057,
        01731: 0107023,
        01732: 0124004,
        01733: 0063077,

        01734: 0020055, // C34
        01735: 0024057,
        01736: 0107023,
        01737: 0124004,
        01740: 0063077,

        01741: 0020055, // C35
        01742: 0024061,
        01743: 0123404,
        01744: 0063077,

        01745: 0020055, // C36
        01746: 0024057,
        01747: 0107404,
        01750: 0063077,

        01751: 0020055, // C37
        01752: 0024057,
        01753: 0123404,
        01754: 0063077,

        01755: 0020057, // C38
        01756: 0024057,
        01757: 0123423,
        01760: 0110004,
        01761: 0063077,

        01762: 0020142, // C39
        01763: 0024141,
        01764: 0107404,
        01765: 0063077,

        01766: 0020142, // C40
        01767: 0024141,
        01770: 0123404,
        01771: 0063077,

        01772: 0020055, // C41
        01773: 0024057,
        01774: 0122024,
        01775: 0063077,
        01776: 0101002,
        01777: 0063077,

        02000: 0020055, // C42
        02001: 0024055,
        02002: 0122023,
        02003: 0110004,
        02004: 0063077,

        02005: 0020142, // C43
        02006: 0024142,
        02007: 0122023,
        02010: 0110004,
        02011: 0063077,

        02012: 0020141, // C44
        02013: 0024141,
        02014: 0122023,
        02015: 0110004,
        02016: 0063077,

        02017: 0020142, // C45
        02020: 0102000,
        02021: 0104004,
        02022: 0063077,

        02023: 0020055, // C46
        02024: 0105400,
        02025: 0131225,
        02026: 0101003,
        02027: 0063077,

        02030: 0020055, // C47
        02031: 0104425,
        02032: 0151003,
        02033: 0063077,

        02034: 0020057, // C48
        02035: 0104400,
        02036: 0131225,
        02037: 0175003,
        02040: 0063077,

        02041: 0020055, // C49
        02042: 0024055,
        02043: 0122425,
        02044: 0151003,
        02045: 0063077,

        02046: 0020055, // C50
        02047: 0024057,
        02050: 0106422,
        02051: 0130004,
        02052: 0063077,

        02053: 0020055, // C51
        02054: 0024057,
        02055: 0122420,
        02056: 0111225,
        02057: 0175003,
        02060: 0063077,

        02061: 0020141, // C52
        02062: 0102425,
        02063: 0125003,
        02064: 0063077,

        02065: 0126521, // D01
        02066: 0000001,
        02067: 0020777,
        02070: 0106414,
        02071: 0063077,

        02072: 0020402, // D02
        02073: 0126621,
        02074: 0100000,
        02075: 0106414,
        02076: 0063077,

        02077: 0030057, // D03
        02100: 0021056,
        02101: 0101004,
        02102: 0063077,

        02103: 0030061, // D04
        02104: 0021054,
        02105: 0101004,
        02106: 0063077,

        02107: 0034147, // D05
        02110: 0021462,
        02111: 0104004,
        02112: 0063077,

        02113: 0034103, // D06
        02114: 0021454,
        02115: 0101125,
        02116: 0101003,
        02117: 0063077,

        02120: 0020142, // D07
        02121: 0040000,
        02122: 0024000,
        02123: 0106414,
        02124: 0063077,

        02125: 0024141, // D08
        02126: 0044000,
        02127: 0020000,
        02130: 0122414,
        02131: 0063077,

        02132: 0152121, // D09
        02133: 0000000,
        02134: 0050777,
        02135: 0034776,
        02136: 0156414,
        02137: 0063077,

        02140: 0034101, // D10
        02141: 0054150,
        02142: 0020150,
        02143: 0116414,
        02144: 0063077,

        02145: 0102400, // D11
        02146: 0040000,
        02147: 0010000,
        02150: 0175001,
        02151: 0063077,
        02152: 0024000,
        02153: 0131225,
        02154: 0151003,
        02155: 0063077,

        02156: 0102000, // D12
        02157: 0040000,
        02160: 0010000,
        02161: 0063077,
        02162: 0024000,
        02163: 0125004,
        02164: 0063077,

        02165: 0102400, // D13
        02166: 0040000,
        02167: 0014000,
        02170: 0175001,
        02171: 0063077,
        02172: 0024000,
        02173: 0130004,
        02174: 0063077,

        02175: 0102520, // D14
        02176: 0040000,
        02177: 0014000,
        02200: 0063077,
        02201: 0024000,
        02202: 0125004,
        02203: 0063077,

        02204: 0020144, // D15
        02205: 0040143,
        02206: 0026143,
        02207: 0131225,
        02210: 0175003,
        02211: 0063077,
        02212: 0034143,
        02213: 0116414,
        02214: 0063077,

        02215: 0020146, // D16
        02216: 0040145,
        02217: 0024144,
        02220: 0044143,
        02221: 0032145,
        02222: 0155225,
        02223: 0175003,
        02224: 0063077,
        02225: 0030145,
        02226: 0034143,
        02227: 0112415,
        02230: 0136414,
        02231: 0063077,

        02232: 0102400, // D17
        02233: 0126400,
        02234: 0152400,
        02235: 0176400,
        02236: 0000402,
        02237: 0063077,
        02240: 0101005,
        02241: 0125004,
        02242: 0063077,
        02243: 0151005,
        02244: 0175004,
        02245: 0063077,

        02246: 0000403, // D18
        02247: 0002255,
        02250: 0002255,
        02251: 0020776,
        02252: 0040776,
        02253: 0002775,
        02254: 0063077,
        02255: 0024772,
        02256: 0106414,
        02257: 0063077,

        02260: 0102400, // D19
        02261: 0126400,
        02262: 0152400,
        02263: 0176401,
        02264: 0002266,
        02265: 0004402,
        02266: 0063077,
        02267: 0101005,
        02270: 0125004,
        02271: 0063077,
        02272: 0151004,
        02273: 0063077,
        02274: 0020770,
        02275: 0116414,
        02276: 0063077,

        02277: 0020056, // D20
        02300: 0040020,
        02301: 0026020,
        02302: 0106415,
        02303: 0063077,

        02304: 0020056, // D21
        02305: 0040021,
        02306: 0026021,
        02307: 0030021,
        02310: 0112645,
        02311: 0151003,
        02312: 0063077,

        02313: 0020056, // D22
        02314: 0040022,
        02315: 0026022,
        02316: 0130004,
        02317: 0063077,

        02320: 0020060, // D23
        02321: 0040037,
        02322: 0026037,
        02323: 0125225,
        02324: 0063077,

        02325: 0020060, // D24
        02326: 0040034,
        02327: 0026034,
        02330: 0106415,
        02331: 0063077,

        02332: 0020060, // D25
        02333: 0040030,
        02334: 0026030,
        02335: 0130004,
        02336: 0063077,

        02337: 0063500, // E01
        02340: 0063077,

        02341: 0063400, // E02
        02342: 0101001,
        02343: 0063077,

        02344: 0063700, // E03
        02345: 0063077,

        02346: 0063600, // E04
        02347: 0101001,
        02350: 0063077,

        02351: 0020003, // E05
        02352: 0040001,
        02353: 0060177,
        02354: 0101000,
        02355: 0063577,
        02356: 0101001,
        02357: 0063077,
        02360: 0063477,
        02361: 0063077,

        02362: 0020003, // E06
        02363: 0040001,
        02364: 0060177,
        02365: 0101000,
        02366: 0063477,
        02367: 0063077,
        02370: 0060277,
        02371: 0063577,
        02372: 0063077,

        02373: 0060100, // E07
        02374: 0101000,
        02375: 0063577,
        02376: 0063077,

        02377: 0060077, // E08
        02400: 0101000,
        02401: 0063577,
        02402: 0063077,

        02403: 0060377, // E09
        02404: 0101000,
        02405: 0063477,
        02406: 0063577,
        02407: 0063077,

        02410: 0063677,
        02411: 0063777,
        02412: 0063077,

        02413: 0060477, // E10
        02414: 0111000,
        02415: 0112414,
        02416: 0063077,

        02417: 0062677, // E11
        02420: 0126001,
        02421: 0063077,
        02422: 0065477,
        02423: 0125004,
        02424: 0063077,

        02425: 0102620,
        02426: 0152440,
        02427: 0073101,
        02430: 0101002,
        02431: 0000406,

        02432: 0034045,
        02433: 0011403,
        02434: 0000401,
        02435: 0000376,

        02436: 0000376,
        02437: 0020777, // CKMD
        02440: 0000403,

        02441: 0002442,
        02442: 0020777, // MULDIV
        02443: 0040170,

        02444: 0102400, // F01
        02445: 0126400,
        02446: 0152400,
        02447: 0176440,
        02450: 0073101,
        02451: 0101003,
        02452: 0063077,

        02453: 0102620, // F02
        02454: 0126620,
        02455: 0152620,
        02456: 0176620,
        02457: 0073101,
        02460: 0101003,
        02461: 0063077,

        02462: 0102620, // F03
        02463: 0152620,
        02464: 0176400,
        02465: 0126440,
        02466: 0073101,
        02467: 0125003,
        02470: 0063077,

        02471: 0102000, // F04
        02472: 0152000,
        02473: 0176620,
        02474: 0126620,
        02475: 0073101,
        02476: 0125003,
        02477: 0063077,

        02500: 0102400, // F05
        02501: 0152440,
        02502: 0073201,
        02503: 0101002,
        02504: 0063077,

        02505: 0102400, // F06
        02506: 0152440,
        02507: 0073001,
        02510: 0101002,
        02511: 0063077,

        02512: 0102400, // F07
        02513: 0152440,
        02514: 0073501,
        02515: 0063077,
        02516: 0101002,
        02517: 0063077,

        02520: 0102400, // F08
        02521: 0152440,
        02522: 0071101,
        02523: 0101002,
        02524: 0063077,

        02525: 0102400, // F09
        02526: 0152440,
        02527: 0072101,
        02530: 0101002,

        02531: 0102400, // F10
        02532: 0152440,
        02533: 0073100,
        02534: 0062677,
        02535: 0101002,
        02536: 0063077,

        02537: 0102400, // F11
        02540: 0152440,
        02541: 0073103,
        02542: 0062677,
        02543: 0101002,
        02544: 0063077,

        02545: 0102400, // F12
        02546: 0152440,
        02547: 0073105,
        02550: 0062677,
        02551: 0101002,
        02552: 0063077,

        02553: 0102400, // F13
        02554: 0152440,
        02555: 0073111,
        02556: 0062677,
        02557: 0101002,
        02560: 0063077,

        02561: 0102400, // F14
        02562: 0152440,
        02563: 0073121,
        02564: 0062677,
        02565: 0101002,
        02566: 0063077,

        02567: 0102400, // F15
        02570: 0152440,
        02571: 0072541,
        02572: 0062677,
        02573: 0101002,
        02574: 0063077,

        02575: 0102400, // F16
        02576: 0152440,
        02577: 0063101,
        02600: 0101002,
        02601: 0063077,

        02602: 0102400, // F17
        02603: 0152440,
        02604: 0077101,
        02605: 0101002,
        02606: 0063077,

        02607: 0102400, // F18
        02610: 0152440,
        02611: 0067101,
        02612: 0101002,
        02613: 0063077,

        02614: 0102000, // F18A
        02615: 0060401,
        02616: 0100014,
        02617: 0063077,

        02620: 0020106, // F18B
        02621: 0105000,
        02622: 0065401,
        02623: 0106414,
        02624: 0063077,

        02625: 0102440, // F19
        02626: 0024061,
        02627: 0131400,
        02630: 0073101,
        02631: 0101002,
        02632: 0063077,
        02633: 0125004,
        02634: 0063077,
        02635: 0101225,
        02636: 0101003,
        02637: 0063077,

        02640: 0102440, // F20
        02641: 0024104,
        02642: 0131400,
        02643: 0073101,
        02644: 0101002,
        02645: 0063077,
        02646: 0125004,
        02647: 0063077,
        02650: 0034104,
        02651: 0162414,
        02652: 0063077,

        02653: 0102440, // F21
        02654: 0024110,
        02655: 0131400,
        02656: 0073101,
        02657: 0101002,
        02660: 0063077,
        02661: 0125004,
        02662: 0063077,
        02663: 0034110,
        02664: 0162414,
        02665: 0063077,

        02666: 0102440, // F22
        02667: 0024114,
        02670: 0131400,
        02671: 0073101,
        02672: 0101002,
        02673: 0063077,
        02674: 0125004,
        02675: 0063077,
        02676: 0034114,
        02677: 0162414,
        02700: 0063077,

        02701: 0102440, // F23
        02702: 0126120,
        02703: 0152000,
        02704: 0073101,
        02705: 0101002,
        02706: 0063077,
        02707: 0125004,
        02710: 0063077,
        02711: 0114225,
        02712: 0175003,
        02713: 0063077,

        02714: 0102440, // F24
        02715: 0126520,
        02716: 0152520,
        02717: 0073101,
        02720: 0101002,
        02721: 0063077,
        02722: 0101004,
        02723: 0063077,
        02724: 0176520,
        02725: 0136414,
        02726: 0063077,

        02727: 0102440, // F25
        02730: 0024102,
        02731: 0152520,
        02732: 0073101,
        02733: 0101002,
        02734: 0063077,
        02735: 0101004,
        02736: 0063077,
        02737: 0034102,
        02740: 0136414,
        02741: 0063077,

        02742: 0102440, // F26
        02743: 0024103,
        02744: 0152520,
        02745: 0073101,
        02746: 0101002,
        02747: 0063077,
        02750: 0101004,
        02751: 0063077,
        02752: 0034103,
        02753: 0136414,
        02754: 0063077,

        02755: 0102440, // F27
        02756: 0024104,
        02757: 0152520,
        02760: 0073101,
        02761: 0101002,
        02762: 0063077,
        02763: 0101004,
        02764: 0063077,
        02765: 0034104,
        02766: 0136414,
        02767: 0063077,

        02770: 0102440, // F28
        02771: 0024105,
        02772: 0152520,
        02773: 0073101,
        02774: 0101002,
        02775: 0063077,
        02776: 0101004,
        02777: 0063077,
        03000: 0034105,
        03001: 0136414,
        03002: 0063077,

        03003: 0102440, // F29
        03004: 0024106,
        03005: 0152520,
        03006: 0073101,
        03007: 0101002,
        03010: 0063077,
        03011: 0101004,
        03012: 0063077,
        03013: 0034106,
        03014: 0136414,
        03015: 0063077,

        03016: 0102440, // F30
        03017: 0024107,
        03020: 0152520,
        03021: 0073101,
        03022: 0101002,
        03023: 0063077,
        03024: 0101004,
        03025: 0063077,
        03026: 0034107,
        03027: 0136414,
        03030: 0063077,

        03031: 0102440, // F31
        03032: 0024110,
        03033: 0152520,
        03034: 0073101,
        03035: 0101002,
        03036: 0063077,
        03037: 0101004,
        03040: 0063077,
        03041: 0034110,
        03042: 0136414,
        03043: 0063077,

        03044: 0102440, // F32
        03045: 0024111,
        03046: 0152520,
        03047: 0073101,
        03050: 0101002,
        03051: 0063077,
        03052: 0101004,
        03053: 0063077,
        03054: 0034111,
        03055: 0136414,
        03056: 0063077,

        03057: 0102440, // F33
        03060: 0024112,
        03061: 0152520,
        03062: 0073101,
        03063: 0101002,
        03064: 0063077,
        03065: 0101004,
        03066: 0063077,
        03067: 0034112,
        03070: 0136414,
        03071: 0063077,

        03072: 0102440, // F34
        03073: 0024113,
        03074: 0152520,
        03075: 0073101,
        03076: 0101002,
        03077: 0063077,
        03100: 0101004,
        03101: 0063077,
        03102: 0034113,
        03103: 0136414,
        03104: 0063077,

        03105: 0102440, // F35
        03106: 0024114,
        03107: 0152520,
        03110: 0073101,
        03111: 0101002,
        03112: 0063077,
        03113: 0101004,
        03114: 0063077,
        03115: 0034114,
        03116: 0136414,
        03117: 0063077,

        03120: 0102440, // F36
        03121: 0024115,
        03122: 0152520,
        03123: 0073101,
        03124: 0101002,
        03125: 0063077,
        03126: 0101004,
        03127: 0063077,
        03130: 0034115,
        03131: 0136414,
        03132: 0063077,

        03133: 0102440, // F37
        03134: 0024116,
        03135: 0152520,
        03136: 0073101,
        03137: 0101002,
        03140: 0063077,
        03141: 0101004,
        03142: 0063077,
        03143: 0034116,
        03144: 0136414,
        03145: 0063077,

        03146: 0102440, // F38
        03147: 0024117,
        03150: 0152520,
        03151: 0073101,
        03152: 0101002,
        03153: 0063077,
        03154: 0101004,
        03155: 0063077,
        03156: 0034117,
        03157: 0136414,
        03160: 0063077,

        03161: 0102440, // F39
        03162: 0024120,
        03163: 0152520,
        03164: 0073101,
        03165: 0101002,
        03166: 0063077,
        03167: 0101004,
        03170: 0063077,
        03171: 0034120,
        03172: 0136414,
        03173: 0063077,

        03174: 0102400, // G01
        03175: 0152400,
        03176: 0126520,
        03177: 0073301,
        03200: 0125004,
        03201: 0063077,

        03202: 0102400, // G02
        03203: 0152400,
        03204: 0126520,
        03205: 0073301,
        03206: 0101005,
        03207: 0151004,
        03210: 0063077,

        03211: 0102400, // G03
        03212: 0152520,
        03213: 0024063,
        03214: 0073301,
        03215: 0034063,
        03216: 0101005,
        03217: 0166414,
        03220: 0063077,

        03221: 0102400, // G04
        03222: 0152520,
        03223: 0024151,
        03224: 0073301,
        03225: 0034151,
        03226: 0101005,
        03227: 0166414,
        03230: 0063077,

        03231: 0102400, // G05
        03232: 0152520,
        03233: 0024152,
        03234: 0073301,
        03235: 0034152,
        03236: 0101005,
        03237: 0166414,
        03240: 0063077,

        03241: 0102400, // G06
        03242: 0152520,
        03243: 0024153,
        03244: 0073301,
        03245: 0034153,
        03246: 0101005,
        03247: 0166414,
        03250: 0063077,

        03251: 0102400, // G07
        03252: 0152520,
        03253: 0024154,
        03254: 0073301,
        03255: 0034154,
        03256: 0101005,
        03257: 0166414,
        03260: 0063077,

        03261: 0102400, // G08
        03262: 0152520,
        03263: 0024155,
        03264: 0073301,
        03265: 0034155,
        03266: 0101005,
        03267: 0166414,
        03270: 0063077,

        03271: 0102400, // G09
        03272: 0152520,
        03273: 0024156,
        03274: 0073301,
        03275: 0034156,
        03276: 0101005,
        03277: 0166414,
        03300: 0063077,

        03301: 0102400, // G10
        03302: 0152520,
        03303: 0024157,
        03304: 0073301,
        03305: 0034157,
        03306: 0101005,
        03307: 0166414,
        03310: 0063077,

        03311: 0102400, // G11
        03312: 0152520,
        03313: 0024160,
        03314: 0073301,
        03315: 0034160,
        03316: 0101005,
        03317: 0166414,
        03320: 0063077,

        03321: 0102400, // G12
        03322: 0152520,
        03323: 0024161,
        03324: 0073301,
        03325: 0034161,
        03326: 0101005,
        03327: 0166414,
        03330: 0063077,

        03331: 0102400, // G13
        03332: 0152520,
        03333: 0024162,
        03334: 0073301,
        03335: 0034162,
        03336: 0101005,
        03337: 0166414,
        03340: 0063077,

        03341: 0102400, // G14
        03342: 0152520,
        03343: 0024163,
        03344: 0073301,
        03345: 0034163,
        03346: 0101005,
        03347: 0166414,
        03350: 0063077,

        03351: 0102400, // G15
        03352: 0152520,
        03353: 0024164,
        03354: 0073301,
        03355: 0034164,
        03356: 0101005,
        03357: 0166414,
        03360: 0063077,

        03361: 0102400, // G16
        03362: 0152520,
        03363: 0024165,
        03364: 0073301,
        03365: 0034165,
        03366: 0101005,
        03367: 0166414,
        03370: 0063077,

        03371: 0102400, // G17
        03372: 0152520,
        03373: 0024166,
        03374: 0073301,
        03375: 0034166,
        03376: 0101005,
        03377: 0166414,
        03400: 0063077,

        03401: 0102400, // G18
        03402: 0152520,
        03403: 0024167,
        03404: 0073301,
        03405: 0034167,
        03406: 0101005,
        03407: 0166414,
        03410: 0063077,

        03411: 0102400, // G19
        03412: 0152520,
        03413: 0024101,
        03414: 0073301,
        03415: 0151225,
        03416: 0151003,
        03417: 0063077,

        03420: 0102520, // G20
        03421: 0152520,
        03422: 0024061,
        03423: 0073301,
        03424: 0034101,
        03425: 0101005,
        03426: 0136414,
        03427: 0063077,

        03430: 0102000, // G21
        03431: 0152520,
        03432: 0126520,
        03433: 0073301,
        03434: 0034061,
        03435: 0125005,
        03436: 0116414,
        03437: 0063077,

        03440: 0034045,
        03441: 0011403,
        03442: 0000401,
        03443: 0002170, // JMP @170 ; start new pass 
    }
    startAddr := 00376
    haltAddr := 03443

    n := NewNova()
    n.LoadMemory(0, program[:])

    // Stop test after one pass
    n.Deposit(haltAddr, 0063077)

    n.Start(startAddr)
    addr, err := n.WaitForHalt(time.Millisecond * 500)
    if err != nil {
        n.Stop()
        t.Error("program: want: %0, have: timeout", addr)
    } else if addr != haltAddr + 1 {
        t.Errorf("have: %05o, want: %05o", addr, haltAddr + 1)
    }
}
